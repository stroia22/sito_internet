<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>PRIMA PAGINA WEB</title>
	<style type="text/css">
	@import url(foglio_di_stile.css);
</style>
	<script type="text/javascript">
	document.addEventListener("DOMContentLoaded", ready);

		function test(){
			alert('ciao!!!');
		}
		function ready(){

			const persona = {
				nome: "silvio",
				cognome: "troia",
				eta: 2,
				colore_preferito: ["verde", "giallo", "nero"],
				fullName: function() {
					return this.nome + " " + this.cognome;
				}
			};

			const address = {
					street: "via via via",
					cap: 70100
				};

			persona.indirizzo = address;


			persona.nome = "peppino";
			persona.altezza = "1,60 cm";

			console.log(persona.fullName());
			console.log(persona);

			// function asincrona(){
			// 	setTimeout(() => console.log("dopo 2 secondi"), 2000);

			// 	console.log('immediatamente');
			// }

			// asincrona();


			let promise = new Promise(function(resolve, reject) {
			  	setTimeout(() => resolve("fatto!"), 1000);
			});

			// resolve esegue la prima funzione in in .then
			promise.then(
			  	result => console.log(result), // mostra "fatto!" dopo 1 secondo
			  	error => console.log(error) // non viene eseguito
			);

			let promiseError = new Promise(function(resolve, reject) {
			  	setTimeout(() => reject("Hoooops Errore!"), 2000);
			});

			// reject runs the second function in .then
			promiseError.then(
			  	result => console.log(result, 200), // non vene eseguita
			  	error => console.log(error, 400) // mostra "Error: Whoops!" dopo 1 secondo
			);


			async function getData() {
				const url = "https://jsonplaceholder.typicode.com/users/4";
			    const response = await fetch(url);
			   	console.log(response);

			    const json = await response.json();
			    console.log(json);

			    let {name, email} = json;
			    console.log(name, email);
			}

			getData();

			let jsonUser = {
							   "name": "TEST",
							   "username": "Test",
							   "email": "Sincere@april.biz",
							   "phone": "1-770-736-8031 x56442",
							   "website": "hildegard.org",
								"company": {
								    "name": "Overzoom",
								    "catchPhrase": "Multi-layered client-server neural-net",
								    "bs": "harness real-time e-markets"
								}
							};

			async function setData(user) {
			    const response = await fetch("https://jsonplaceholder.typicode.com/users", {
			    	 body: JSON.stringify(user),
			    	 method: "POST",
			    	 headers: {
					    "Content-Type": "application/json",
					  },
			    });

			    const oggettoRisposta = await response.json();

			    return oggettoRisposta;
			}

			setData(jsonUser).then(data => console.log(data));

			fetch('https://jsonplaceholder.typicode.com/users/2')
				.then(response => response.json())
				.then(data => console.log(data));


		}

	</script>
</head>
<body>

	CIAO MONDO

	<div>
		<div class="prova">Aggiungiamo un contenuto che renda visibile il documento css</div>
	</div>

</body>

</html>
