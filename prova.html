<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>SECONDA PAGINA WEB</title>
	<link rel="stylesheet" type="text/css" href="foglio_di_stile.css">
	<script type="text/javascript">
		document.addEventListener("DOMContentLoaded", ready);

		function ready(){

			class Persona {

				constructor(nome, cognome, eta){
					this.nome = nome;
					this.cognome = cognome;
					this.eta = eta;
				}

				dimmi_ciao(){
					alert('sono ' + this.nome + ' e vi saluto');
				}

				saluta_persona(persona_da_salutare){
					alert('sono ' + this.nome + ' e saluto ' + persona_da_salutare.nome);
				}
			}

			let silvio = new Persona('silvio', 'troia', 40);
			let lillino = new Persona('lillino', 'valvara', 22);

			//silvio.saluta_persona(lillino);
			

			//pending .... attende che la risposta arrivi
			//fullfilled ... risposta corretta
			//rejected ..... risposta rigettata o errata
			

			let promise = new Promise(function(resolve, reject){				
				setTimeout( () => reject("OPS qualcosa Ã¨ andato storto"), 1000 );
			});

			promise.then( 
				result => alert(result),
				error => console.log(error)
				);
			

			let jsonUser = {   
							   "name": "TEST",
							   "username": "Test",
							   "email": "Sincere@april.biz",
							   "phone": "1-770-736-8031 x56442",
							   "website": "hildegard.org",
								"company": {
								    "name": "Overzoom",
								    "catchPhrase": "Multi-layered client-server neural-net",
								    "bs": "harness real-time e-markets"
								}
							};

			async function setData() {

				const risposta = await fetch('https://jsonplaceholder.typicode.com/users', {
					method: "POST",
					body: JSON.stringify(jsonUser),
					headers: {
						"Content-Type": "application/json"
					}

				});

				console.log(risposta);

				const oggettoRisultante = await risposta.json();

				console.log(oggettoRisultante);

			}

			setData();


			fetch('https://jsonplaceholder.typicode.com/users/2')
				.then(result => result.json())
				.then(data => {

					//let { username, email } = data;

					let username = data.username;
					let email = data.email;


					console.log(username, email);

				});

		}

	</script>
</head>
<body id="body">

	<h1>CIAO MONDO</h1>

</body>

</html>
